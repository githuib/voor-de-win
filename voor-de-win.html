<head>
  <title>Voor de win!</title>
</head>

<body>
  {{> navbar}}

  <div class="container">
    {{#if showLotteries}}
      {{> lotteries}}
    {{else}}
      {{> notLoggedIn}}
    {{/if}}
  </div>

</body>


<template name="navbar">
  <div class="navbar navbar-default" role="navigation">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Voor de win!</a>
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
      </button>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
          {{> loginButtons}}
      </ul>
    </div>
  </div>
</template>


<template name="notLoggedIn">
  <div class="not-logged-in alert alert-danger" role="alert">
    <p>Kies rechtsbovenin voor aanmelden / registreren om mee te spelen.</p>
  </div>
</template>


<template name="lotteries">
  <form class="new-lottery">
    <div class="row">
      <div class="col-lg-4">
        <div class="form-group">
          <div class="input-group">
            <input type="text" name="name" class="form-control" placeholder="Voeg een loterij toe" required>
            <span class="input-group-btn">
              <button class="btn btn-primary" type="submit">Voeg toe</button>
            </span>
          </div>
        </div>
      </div>
    </div>
  </form>

  <div class="lotteries">
    {{#each lotteries}}
      {{> lottery}}
    {{/each}}
  </div>
</template>


<template name="lottery">
  <div class="lottery">

    <div class="participants panel panel-info">
      <div class="panel-heading">
        Loterij <strong>{{name}}</strong>
      </div>

      <div class="panel-body">
        <div class="row">
          <div class="col-lg-6">
            {{#if showJoin}}
              <div class="form-group">
                <button class="join btn btn-success">Doe mee!</button>
              </div>
            {{/if}}

            {{#if showPlay}}
              <div class="form-group">
                <button class="start btn btn-danger">Start de loterij!</button>
              </div>
            {{/if}}
          </div>
        </div>

        <div class="row">

          <div class="col-lg-6">
            <div class="participants panel panel-default">
              <div class="panel-heading">Deelnemers</div>
              <ul class="list-group">
                {{#each participants}}
                  {{> participant}}
                {{/each}}
              </ul>
            </div>
          </div>

          <div class="col-lg-6">
            <div class="participants panel panel-default">
              <div class="panel-heading">Uitslag</div>
              <div class="panel-body">
                {{#if showWinner}}
                  <h1 class="winner">
                    De winnaar is:
                    <span>{{countdown}}</span>
                    <span>{{winner.username}}</span>
                  </h1>
                {{/if}}
              </div>
            </div>
          </div>

        </div>
      </div>

    </div>

  </div>
</template>


<template name="participant">
  <li class="list-group-item">{{username}}</li>
</template>
